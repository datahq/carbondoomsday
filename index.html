<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="img/carbon-blue.png">
    <title>State of Carbon</title>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<!-- Main Section-->
<div class="main">
    <!-- Start Container-->
   <div class="container-fluid">
      <!-- Start of Page Header -->
      <div class="page-header">
        <div class="row">
            <div class="col-xs-1 nopadding-right">
                <img class="logo" width="75" src="img/logo.png">
            </div>
            <div class="col-xs-11 nopadding-left">
                <h2 class="main-title">State of Carbon</h2>
            </div>
        </div>
      </div>
      <!-- End of Page Header -->

      <div class="tab-section">
            <div class="card">
                <!-- Start tab Section-->
                <div class="row">
                  <div class="col-sm-6 pull-right">
                        <ul class="range-tabs pull-right">
                            <li><a href="/?period=year" id="year">Last Year</a></li>
                            <li><a href="/?period=threeYears" id="threeYears">3 Years</a></li>
                            <li><a href="/?period=fiveYears"  id="fiveYears">5 Years</a></li>
                            <li><a href="/?period=tenYears"  id="tenYears">10 Years</a></li>
                            <li><a href="/?period=all"  id="all">All</a></li>
                        </ul>
                  </div>
                </div>
                <div id="chart">
                    <div class="react-me" data-type="data-views">
                      <div class="loader">Loading...</div>
                    </div>
                    <div class="react-me" data-type="resource-preview" data-resource="0"></div>
                </div>
            </div>

        </div>
        <!-- End tab Section-->

       <!-- Start About tab Section-->
       <section class="about">
           <div class="section-title">
               <span class="main-title">
                   CARBON ABOUT
               </span>
           </div>
           <div class="row">
               <div class="col-sm-4">
                   <div class="card">
                       <div class="row">
                           <div class="col-xs-2">
                               <i class="fa fa-github" aria-hidden="true"></i>
                           </div>
                           <div class="col-xs-10">
                               <a href="https://github.com/datahq/carbondoomsday" class="card-title">Give us a star on GitHub</a>
                               <p>TAKES 5 SECONDS</p>
                           </div>
                       </div>
                   </div>
               </div>
               <div class="col-sm-4">
                   <div class="card">
                       <div class="row">
                           <div class="col-xs-2">
                               <i class="fa fa-twitter" aria-hidden="true"></i>
                           </div>
                           <div class="col-xs-10">
                               <a href="https://twitter.com/carbondoomsday" class="card-title">Tweet</a>
                               <p>TAKES 5 SECONDS</p>
                           </div>
                       </div>
                   </div>
               </div>
               <div class="col-sm-4">
                   <div class="card">
                       <div class="row">
                           <div class="col-xs-2">
                                   <i class="fa fa-lightbulb-o" aria-hidden="true"></i>
                           </div>
                           <div class="col-xs-10">
                               <a href="https://gitter.im/datahubio/chat" class="card-title">Submit an Idea</a>
                               <p>TAKES 2 MINUTES</p>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

           <div class="row">
               <div class="col-sm-4">
                   <div class="card">
                       <div class="row">
                           <div class="col-xs-2">
                                   <i class="fa fa-code" aria-hidden="true"></i>
                           </div>
                           <div class="col-xs-10">
                               <a href="#" class="card-title">Embed this chart</a>
                               <p>TAKES 2 MINUTES</p>
                           </div>
                       </div>
                   </div>
               </div>
               <div class="col-sm-4">
                   <div class="card">
                       <div class="row">
                           <div class="col-xs-2">
                                   <i class="fa fa-cog" aria-hidden="true"></i>
                           </div>
                           <div class="col-xs-10">
                               <a href="#" class="card-title">Check out our API</a>
                               <p>TAKES 10 MINUTES</p>
                           </div>
                       </div>
                   </div>
               </div>
           </div>

       </section>
       <!-- End About-Page Section-->
       <!-- Start Project Section-->
       <section class="about project">
           <div class="section-title">
               <span class="main-title">
                   ABOUT THE PROJECT
                   <!--Padding is optional-->
               </span>
           </div>

           <div class="row">
               <div class="col-sm-4">
                   <div class="card">
                       <h3>MISSION</h3>
                       <p>What if tracking climate change was as easy as checking the price of Bitcoin?
                           <br/>
                           <br> Every day, NOAA scientists carefully measure the carbon dioxide in the atmosphere from Mauna
                           Loa, Hawaii. This important data is public but hard to digest. We want to empower everyone
                           around the world to use it.
                           <br/>
                           <br> So we built State of Carbon to chart carbon dioxide levels.
                           <br/>
                           <br> Our chart is powered by the worlds first open API for climate change. This enables anyone
                           to enhance NOAAs carbon dioxide data by building charts, sensor networks, and more.
                           <br/>
                           <br> Our code is open source on Github. We are a growing team of 8 people, including programmers,
                           designers and marketers from the USA, Ireland, Australia and Germany.</p>
                   </div>
               </div>
               <div class="col-sm-4">
                   <div class="card">
                       <h3>DATA SOURCES</h3>
                       <p>All of our data is thanks to the work of scientists at NOAA's ESRL who have painstakingly measured carbon dioxide every day since 1958. Their data is free and public.<br><br>

                               <strong>Their release notes say:release notes say:</strong> <br>
                               "This data is made freely available to the public and the scientific community in the belief that their wide dissemination will lead to greater understanding and new scientific insights."<br><br>

                               This data needs to be more accessible. And that's where State of Carbon comes in. We've built a web API and real-time chart of carbon dioxide data.<br><br>

                               You can see our most up to date list of sources <a href="https://github.com/datahq/carbondoomsday">on our Github.</a><br><br>

                       </p>
                   </div>
               </div>
           </div>
           </section>
   </div>
    <!--End Of Container-->
</div>
<!-- End Main Section-->

  <script type="text/javascript">
    function selectPeriod(mySelect) {
      switch (mySelect.value) {
        case 'year':
          window.location.href = '/?period=year';
          break;
        case 'threeYears':
          window.location.href = '/?period=threeYears';
          break;
        case 'fiveYears':
          window.location.href = '/?period=fiveYears';
          break;
        case 'tenYears':
          window.location.href = '/?period=tenYears';
          break;
        case 'all':
          window.location.href = '/?period=all';
          break;
      }
    };


    var resp ;
    var xmlHttp ;

    resp  = '' ;
    xmlHttp = new XMLHttpRequest();

    if (xmlHttp != null) {
        xmlHttp.open( "GET", 'https://datahub.io/core/co2-ppm-daily/datapackage.json', false );
        xmlHttp.send( null );
        resp = xmlHttp.responseText;
    }

    var DP_ID = JSON.parse(resp);
    DP_ID.views = DP_ID.views = [
      {
        "specType": "vega",
        "resources": [
          {
            "name": "co2-ppm-daily",
            "transform": []
          }
        ],
        "spec": {
          "$schema": "https://vega.github.io/schema/vega/v3.json",
          "width": 900,
          "height": 400,
          "padding": 30,
          "data": [
            {
              "name": "co2-ppm-daily",
              "format": {"parse": {"date": "date"}},
              "transform": [
                {"type": "extent", "field": "value", "signal": "extent"}
              ]
            }
          ],

          "scales": [
            {
              "name": "xscale",
              "type": "utc",
              "range": "width",
              "domain": {"data": "co2-ppm-daily", "field": "date"}
            },
            {
              "name": "yscale",
              "type": "linear",
              "range": "height",
              "nice": true,
              "zero": false,
              "domain": {"data": "co2-ppm-daily", "field": "value"}
            }
          ],

          "axes": [
            {"orient": "bottom", "scale": "xscale", "labelFont": "Lato", "labelOpacity": 0.4, "format": "%b %Y"}
          ],

          "marks": [
            {
              "type": "area",
              "from": {"data": "co2-ppm-daily"},
              "encode": {
                "enter": {
                  "x": {"scale": "xscale", "field": "date"},
                  "y": {"scale": "yscale", "field": "value"},
                  "y2": {"scale": "yscale", "signal": "extent[0]"},
                  "fill": {"value": "#FBE7E8"},
                  "stroke": {"value": "#E3B3BD"}
                }
              }
            },
            {
              "type": "text",
              "encode": {
                "enter": {
                  "text": {"signal": "extent[0] + ' PPM'"}
                },
                "update": {
                  "x": {"value": -90},
                  "font": {"value": "Lato"},
                  "fontSize": {"value": 16},
                  "opacity": {"value": 0.4}
                }
              }
            },
            {
              "type": "text",
              "encode": {
                "enter": {
                  "text": {"signal": "extent[0] + ' PPM'"}
                },
                "update": {
                  "x": {"value": -90},
                  "y": {"value": 360},
                  "font": {"value": "Lato"},
                  "fontSize": {"value": 16},
                  "opacity": {"value": 0.4}
                }
              }
            },
            {
              "type": "text",
              "encode": {
                "enter": {
                  "text": {"signal": "extent[1] + ' PPM'"}
                },
                "update": {
                  "x": {"value": 960},
                  "font": {"value": "Lato"},
                  "fontSize": {"value": 16},
                  "opacity": {"value": 0.4}
                }
              }
            },
            {
              "type": "text",
              "encode": {
                "enter": {
                  "text": {"signal": "extent[1] + ' PPM'"}
                },
                "update": {
                  "x": {"value": 960},
                  "y": {"value": 360},
                  "font": {"value": "Lato"},
                  "fontSize": {"value": 16},
                  "opacity": {"value": 0.4}
                }
              }
            }
          ]
        }
      }
    ]

    switch (window.location.href.split('?period=')[1]) {
      case 'year':
        DP_ID.views[0].resources[0].transform[0] = {
          "type": "filter",
          "expression": "(new Date(data['date'])).getFullYear() >= 2018"
        };
        document.getElementById("all").classList.add("year");
        break;
      case 'threeYears':
        DP_ID.views[0].resources[0].transform[0] = {
          "type": "filter",
          "expression": "(new Date(data['date'])).getFullYear() >= 2016"
        };
        document.getElementById("threeYears").classList.add("active");
        break;
      case 'fiveYears':
        DP_ID.views[0].resources[0].transform[0] = {
          "type": "filter",
          "expression": "(new Date(data['date'])).getFullYear() >= 2014"
        };
        document.getElementById("fiveYears").classList.add("active");
        break;
      case '':
      case undefined:
      case 'tenYears':
        DP_ID.views[0].resources[0].transform[0] = {
          "type": "filter",
          "expression": "(new Date(data['date'])).getFullYear() >= 2009"
        };
        document.getElementById("tenYears").classList.add("active");
        break;
      case 'all':
        DP_ID.views[0].resources[0].transform = [];
        document.getElementById("all").classList.add("active");
        break;
    };
  </script>
  <script type="text/javascript" src="frontend-showcase-js/dist/bundle.js"></script>
</body>
